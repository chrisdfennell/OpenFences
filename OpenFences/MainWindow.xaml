<Window x:Class="OpenFences.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="OpenFences"
        Width="980" Height="620"
        WindowStyle="None"
        ResizeMode="CanResize"
        Background="#151518"
        AllowsTransparency="False"
        SnapsToDevicePixels="True">

    <!-- Borderless chrome (keeps resize grips) -->
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="0"
                            CornerRadius="8"
                            GlassFrameThickness="0"
                            ResizeBorderThickness="6"
                            UseAeroCaptionButtons="False"/>
    </shell:WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="34"/>
            <!-- custom titlebar -->
            <RowDefinition Height="*"/>
            <!-- content -->
        </Grid.RowDefinitions>

        <!-- ===== Title bar ===== -->
        <Border Grid.Row="0" Background="#1E1F22" BorderBrush="#2A2B30" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <!-- menu -->
                    <ColumnDefinition Width="*"/>
                    <!-- drag pad -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- window buttons -->
                </Grid.ColumnDefinitions>

                <!-- Dark menu style should be merged in App.xaml -->
                <Menu VerticalAlignment="Stretch" Height="34" Margin="8,0,0,0">
                    <MenuItem Header="_File">
                        <MenuItem Header="New Fence" Click="NewFence_Click"/>
                        <Separator/>
                        <MenuItem Header="Exit" Click="Exit_Click"/>
                    </MenuItem>

                    <MenuItem Header="_View">
                        <MenuItem Header="Toggle Desktop Icons" Click="ToggleDesktopIcons_Click"/>
                        <MenuItem Header="Show All Fences" Click="ShowAll_Click"/>
                        <MenuItem Header="Hide All Fences" Click="HideAll_Click"/>
                    </MenuItem>

                    <MenuItem Header="_Settings">
                        <MenuItem x:Name="MiRunAtStartup"
                                  Header="Start with Windows"
                                  IsCheckable="True"
                                  Click="MiRunAtStartup_Click"/>
                        <MenuItem x:Name="MiHideIconsOnStart"
                                  Header="Hide desktop icons on startup"
                                  IsCheckable="True"
                                  Click="MiHideIconsOnStart_Click"/>
                        <MenuItem x:Name="MiDoubleClickDesktop"
                                  Header="Double-click empty desktop toggles icons"
                                  IsCheckable="True"
                                  Click="MiDoubleClickDesktop_Click"/>
                    </MenuItem>

                    <MenuItem Header="_Help">
                        <MenuItem Header="About" Click="About_Click"/>
                    </MenuItem>
                </Menu>

                <!-- Transparent drag surface between menu and buttons -->
                <Border Grid.Column="1"
                        Background="Transparent"
                        MouseLeftButtonDown="HeaderDrag_MouseLeftButtonDown"
                        ToolTip="Drag to move"/>

                <!-- Window buttons (use your existing handler names) -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,6,0">
                    <StackPanel.Resources>
                        <Style TargetType="Button">
                            <Setter Property="Width"  Value="34"/>
                            <Setter Property="Height" Value="24"/>
                            <Setter Property="Margin" Value="0,0,4,0"/>
                        </Style>
                    </StackPanel.Resources>
                    <Button Content="—" Click="MinimizeButton_Click"/>
                    <Button Content="×"  Margin="0" Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ===== Content (centered vertically & horizontally) ===== -->
        <Grid Grid.Row="1">
            <Border HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Width="720"
                    Padding="28"
                    CornerRadius="16"
                    Background="#1A1B1F"
                    BorderBrush="#2A2B30" BorderThickness="1">
                <StackPanel>
                    <TextBlock Text="OpenFences" FontSize="32" FontWeight="SemiBold" Foreground="#F0F0F0"/>
                    <TextBlock Text="Lightweight desktop fences for Windows"
                               Margin="0,4,0,16"
                               Foreground="#A8ACB3"/>

                    <!-- Button row (no Spacing; use child Margin) -->
                    <StackPanel Orientation="Horizontal">
                        <StackPanel.Resources>
                            <Style TargetType="Button">
                                <Setter Property="Height" Value="32"/>
                                <Setter Property="Margin" Value="0,0,12,0"/>
                            </Style>
                        </StackPanel.Resources>
                        <Button Width="140" Content="＋  New Fence" Click="NewFence_Click"/>
                        <Button Width="160" Content="📁  Open Fences Folder" Click="OpenFencesFolder_Click"/>
                        <Button Width="220" Content="⚡  Auto-Import Desktop Icons" Margin="0" Click="AutoImportDesktop_Click"/>
                    </StackPanel>

                    <Border Margin="0,18,0,0" Padding="12"
        CornerRadius="10"
        Background="#17181C"
        BorderBrush="#2A2B30" BorderThickness="1">
                        <StackPanel>
                            <!-- 1 -->
                            <TextBlock Foreground="#C7CBD1" TextWrapping="Wrap" Margin="0,0,0,6">
            <Run Text="• Use "/>
            <Run FontWeight="Bold" Text="File → New Fence"/>
            <Run Text=" to create your first fence."/>
                            </TextBlock>

                            <!-- 2 -->
                            <TextBlock Foreground="#C7CBD1" TextWrapping="Wrap" Margin="0,0,0,6">
            Drag files/folders onto a fence to create shortcuts inside it.
                            </TextBlock>

                            <!-- 3 -->
                            <TextBlock Foreground="#C7CBD1" TextWrapping="Wrap" Margin="0,0,0,6">
            <Run Text="• Click the "/><Run Text="✎"/><Run Text=" icon on a fence title to rename it."/>
                            </TextBlock>

                            <!-- 4 -->
                            <TextBlock Foreground="#C7CBD1" TextWrapping="Wrap" Margin="0,0,0,6">
            Minimize this window — the app hides to the tray. Double-click the tray icon to restore.
                            </TextBlock>

                            <!-- 5 -->
                            <TextBlock Foreground="#C7CBD1" TextWrapping="Wrap">
            <Run Text="• View → "/><Run FontWeight="Bold" Text="Toggle Desktop Icons"/><Run Text=" hides/shows the default desktop icons behind your fences."/>
                            </TextBlock>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>